language: java
jdk:
  - openjdk8
before_install:
  - chmod +x gradlew
  - chmod +x gradle/wrapper/gradle-wrapper.jar
after_success:
  - |
    if [[ $TRAVIS_EVENT_TYPE == api ]]; then
      openssl aes-256-cbc -K $encrypted_4dcdeec2d8ab_key -iv $encrypted_4dcdeec2d8ab_iv -in private_key.pem.enc -out private_key.pem -d
      ./gradlew run
    fi
  - bash <(curl -s https://codecov.io/bash)
script: "./gradlew check --stacktrace"
